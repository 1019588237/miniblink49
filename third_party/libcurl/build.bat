@call ..\3rd_env.bat

setlocal

set DEF=/DNDEBUG
set DEF=%DEF% /D_CRT_SECURE_NO_DEPRECATE
set DEF=%DEF% /DWIN32
set DEF=%DEF% /DBUILDING_LIBCURL
set DEF=%DEF% /DCURL_STATICLIB
set DEF=%DEF% /DHAVE_LIBZ
set DEF=%DEF% /DHAVE_ZLIB_H

:set DEF=%DEF% /DUSE_SSLEAY
:set DEF=%DEF% /DUSE_OPENSSL

set DEF=%DEF% /DUSE_WINDOWS_SSPI
set DEF=%DEF% /DUSE_SCHANNEL

set DEF=%DEF% /DCURL_DISABLE_LDAP

set DEF=%DEF% /DCURL_DISABLE_DICT
set DEF=%DEF% /DCURL_DISABLE_TFTP
set DEF=%DEF% /DCURL_DISABLE_TELNET
set DEF=%DEF% /DCURL_DISABLE_RTSP
set DEF=%DEF% /DCURL_DISABLE_POP3
set DEF=%DEF% /DCURL_DISABLE_IMAP
set DEF=%DEF% /DCURL_DISABLE_SMTP
set DEF=%DEF% /DCURL_DISABLE_RTMP
set DEF=%DEF% /DCURL_DISABLE_SMB
set DEF=%DEF% /DCURL_DISABLE_NTLM


:set DEF=%DEF% /DCURL_DISABLE_FILE
:set DEF=%DEF% /DCURL_DISABLE_FTP
:set DEF=%DEF% /DCURL_DISABLE_GOPHER


:BuildALL

set COMPILER=%cxx% %DEF% /I. /I include /I ../zlib /I ../


%COMPILER% *.c
%COMPILER% vauth\*.c
%COMPILER% vtls\*.c
%LIBER% /out:../libcurl_imp.lib *.obj
del *.obj

endlocal